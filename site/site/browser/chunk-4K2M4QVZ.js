import{a as w,b as W,c as k,d as P,e as F,f as N,j as A}from"./chunk-WUIIHW2R.js";import{a as x,b as I}from"./chunk-UBY4PNWH.js";import{a as T}from"./chunk-7ZHFCJE7.js";import"./chunk-64RMFKBP.js";import{a as M}from"./chunk-JFSI74IK.js";import{$a as n,Ab as b,Cb as E,Da as _,Ha as c,Na as u,Oa as e,Pa as t,Sa as g,Ta as v,ab as r,ea as h,eb as S,fb as f,gb as y,ta as a,za as d,zb as C}from"./chunk-6FHNHJOP.js";function O(s,l){if(s&1&&(e(0,"article",7)(1,"h3"),n(2),t(),e(3,"p"),n(4),t()()),s&2){let o=l.$implicit;a(2),r(o.title),a(2),r(o.text)}}function q(s,l){if(s&1&&(e(0,"article",7)(1,"p"),n(2),t()()),s&2){let o=l.$implicit;a(2),r(o)}}function B(s,l){if(s&1&&(e(0,"p",14),n(1),t()),s&2){let o=v();a(),r(o.messageStatus)}}function G(s,l){if(s&1&&(e(0,"article",7)(1,"h3"),n(2),t(),e(3,"p"),n(4),t()()),s&2){let o=l.$implicit;a(2),r(o.q),a(2),r(o.a)}}var D=class s{constructor(l,o,i,p){this.state=l;this.api=o;this.auth=i;this.seo=p;h(()=>{let m=this.state.t(),j=this.seo.titleWithSite(m.community.title),L=m.community.lead;this.seo.update({title:j,description:L,ogType:"website"}),this.seo.setJsonLd("app-jsonld",null),this.seo.setJsonLd("blog-jsonld",null)})}messageEmail="";messageText="";messageWebsite="";messageTs=Date.now();messageStatus="";get t(){return this.state.t()}async submitMessage(){this.messageStatus="";let l=this.messageEmail||await this.auth.getUserEmail()||void 0;try{await this.api.postMessage({page:"/community",email:l,message:this.messageText,meta:{hp:this.messageWebsite,ts:this.messageTs}}),this.messageText="",this.messageTs=Date.now(),this.messageStatus="Message sent."}catch(o){this.messageStatus=o.message||"Failed to send message"}}async signInWithProvider(l){this.messageStatus="";let o=await this.auth.signInWithProvider(l);if(o){this.messageStatus=o;return}this.messageStatus="Redirecting to provider..."}static \u0275fac=function(o){return new(o||s)(d(M),d(I),d(x),d(T))};static \u0275cmp=_({type:s,selectors:[["app-community"]],decls:60,vars:14,consts:[[1,"section"],[1,"section-head"],[1,"eyebrow"],[1,"section-lead"],[1,"card-grid","three"],["class","panel",4,"ngFor","ngForOf"],[1,"card-grid","two"],[1,"panel"],[1,"form",3,"submit"],["type","email","name","messageEmail",3,"ngModelChange","ngModel"],[1,"honeypot"],["type","text","name","messageWebsite","autocomplete","off",3,"ngModelChange","ngModel"],["rows","4","name","messageText",3,"ngModelChange","ngModel"],["type","submit",1,"btn","primary"],[1,"hint"],[1,"form-actions"],["type","button",1,"btn","ghost",3,"click"],["class","hint",4,"ngIf"]],template:function(o,i){o&1&&(e(0,"section",0)(1,"div",1)(2,"p",2),n(3),t(),e(4,"h2"),n(5),t(),e(6,"p",3),n(7),t()(),e(8,"div",4),c(9,O,5,2,"article",5),t()(),e(10,"section",0)(11,"div",1)(12,"p",2),n(13),t(),e(14,"h2"),n(15),t()(),e(16,"div",6),c(17,q,3,1,"article",5),t()(),e(18,"section",0)(19,"div",1)(20,"p",2),n(21,"Contact"),t(),e(22,"h2"),n(23,"Send a message"),t(),e(24,"p",3),n(25,"Login required to send a message."),t()(),e(26,"article",7)(27,"form",8),g("submit",function(m){return i.submitMessage(),m.preventDefault()}),e(28,"label")(29,"span"),n(30,"Email"),t(),e(31,"input",9),y("ngModelChange",function(m){return f(i.messageEmail,m)||(i.messageEmail=m),m}),t()(),e(32,"label",10)(33,"span"),n(34,"Website"),t(),e(35,"input",11),y("ngModelChange",function(m){return f(i.messageWebsite,m)||(i.messageWebsite=m),m}),t()(),e(36,"label")(37,"span"),n(38,"Message"),t(),e(39,"textarea",12),y("ngModelChange",function(m){return f(i.messageText,m)||(i.messageText=m),m}),t()(),e(40,"button",13),n(41,"Send"),t(),e(42,"p",14),n(43,"Or continue with"),t(),e(44,"div",15)(45,"button",16),g("click",function(){return i.signInWithProvider("github")}),n(46,"GitHub"),t(),e(47,"button",16),g("click",function(){return i.signInWithProvider("google")}),n(48,"Google"),t(),e(49,"button",16),g("click",function(){return i.signInWithProvider("azure")}),n(50,"Microsoft"),t()(),c(51,B,2,1,"p",17),t()()(),e(52,"section",0)(53,"div",1)(54,"p",2),n(55),t(),e(56,"h2"),n(57),t()(),e(58,"div",6),c(59,G,5,2,"article",5),t()()),o&2&&(a(3),r(i.t.community.eyebrow),a(2),r(i.t.community.title),a(2),r(i.t.community.lead),a(2),u("ngForOf",i.t.community.cards),a(4),r(i.t.community.linksTitle),a(2),r(i.t.community.linksTitle),a(2),u("ngForOf",i.t.community.links),a(14),S("ngModel",i.messageEmail),a(4),S("ngModel",i.messageWebsite),a(4),S("ngModel",i.messageText),a(12),u("ngIf",i.messageStatus),a(4),r(i.t.faq.eyebrow),a(2),r(i.t.faq.title),a(2),u("ngForOf",i.t.faq.items))},dependencies:[E,C,b,A,N,w,W,k,F,P],encapsulation:2})};export{D as CommunityComponent};
