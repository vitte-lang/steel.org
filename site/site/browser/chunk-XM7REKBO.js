import{a as A}from"./chunk-7ZHFCJE7.js";import"./chunk-64RMFKBP.js";import{a as R}from"./chunk-JFSI74IK.js";import{$a as s,Ab as V,Cb as $,Da as F,Ha as u,Na as m,Oa as o,Pa as n,Qa as C,Ra as x,Sa as g,Ta as v,U as p,V as f,Va as T,Wa as y,Xa as k,Ya as L,Za as _,_a as E,ab as c,bb as b,db as D,ea as w,mb as M,ta as l,za as S,zb as O}from"./chunk-6FHNHJOP.js";var P=["cEditorHost"],H=["steelEditorHost"];function N(r,e){if(r&1&&(o(0,"article",36)(1,"h3"),s(2),n(),o(3,"p"),s(4),n()()),r&2){let i=e.$implicit;l(2),c(i.title),l(2),c(i.text)}}function j(r,e){if(r&1){let i=x();o(0,"button",37),g("click",function(){let a=p(i).index,d=v();return f(d.setActiveCFile(a))}),s(1),n()}if(r&2){let i=e.$implicit,t=e.index,a=v();_("active",t===a.activeCFile),l(),b(" ",i.name," ")}}function q(r,e){if(r&1&&(o(0,"div",38)(1,"span",39),s(2),n(),o(3,"span"),s(4),n()()),r&2){let i=e.$implicit;l(),E(i.status),l(),c(i.status),l(2),c(i.path)}}function W(r,e){if(r&1&&(o(0,"div",40)(1,"span",41),s(2),n(),o(3,"span"),s(4),n()()),r&2){let i=e.$implicit;E(i.level),l(2),c(i.level),l(2),c(i.text)}}function K(r,e){r&1&&(o(0,"p",42),s(1,"Run a build to see logs, errors, and result output."),n())}function Q(r,e){if(r&1&&(o(0,"p",43),s(1),n()),r&2){let i=v();l(),c(i.buildResult)}}function z(r,e){if(r&1){let i=x();o(0,"button",46),g("click",function(){let a=p(i).$implicit,d=v(2);return f(d.jumpToIssue(a))}),o(1,"span",47),s(2),n(),o(3,"span"),s(4),n()()}if(r&2){let i=e.$implicit;l(),E(i.level),l(),c(i.level),l(2),D("",i.file,":",i.line,":",i.column," \u2014 ",i.message)}}function J(r,e){if(r&1&&(o(0,"div",44),u(1,z,5,7,"button",45),n()),r&2){let i=v();l(),m("ngForOf",i.filteredIssues)}}function Y(r,e){r&1&&(o(0,"p",42),s(1,"No diagnostics yet."),n())}function U(r,e){if(r&1&&(o(0,"article",48)(1,"h3"),s(2),n(),o(3,"pre")(4,"code"),s(5),n()()()),r&2){let i=e.$implicit;l(2),c(i.title),l(3),c(i.code)}}function G(r,e){if(r&1&&(o(0,"article",36)(1,"h3"),s(2),n(),o(3,"p"),s(4),n()()),r&2){let i=e.$implicit;l(2),c(i.title),l(2),c(i.text)}}function X(r,e){if(r&1&&(o(0,"article",36)(1,"p"),s(2),n()()),r&2){let i=e.$implicit;l(2),c(i)}}function Z(r,e){if(r&1&&(o(0,"article",36)(1,"p"),s(2),n()()),r&2){let i=e.$implicit;l(2),c(i)}}function ee(r,e){if(r&1&&(o(0,"article",48)(1,"pre")(2,"code"),s(3),n()()()),r&2){let i=e.$implicit;l(3),b("steel@mymachine$ ",i)}}var B=class r{constructor(e,i){this.state=e;this.seo=i;w(()=>{let t=this.state.t(),a=this.seo.titleWithSite(t.docs.title),d=t.docs.lead;this.seo.update({title:a,description:d,ogType:"website"}),this.seo.setJsonLd("app-jsonld",null),this.seo.setJsonLd("blog-jsonld",null)})}cEditorHost;steelEditorHost;cFiles=[{name:"main.c",path:"src/main.c",initial:`#include <stdio.h>

int main(void) {
  printf("Steel says hello!\\n");
  return 0;
}`},{name:"utils.c",path:"src/utils.c",initial:`#include <stddef.h>

int add(int a, int b) {
  return a + b;
}`}];activeCFile=0;steelConfCode=`[tool cc]
	.exec "cc"
..

[bake c_build]
	.make c_src cglob "src/**/*.c"
	[run cc]
		.set "-O2" 1
		.set "-g" 1
		.takes c_src as "@args"
		.emits exe as "-o"
	..
	.output exe "target/out/app_c"
..`;buildLogs=[];buildIssues=[];buildArtifacts=[];buildResult="";issueFilter="all";buildToggle=!1;monaco;cEditor;steelEditor;get t(){return this.state.t()}get examples(){return this.state.examples}ngOnInit(){this.buildArtifacts=[{path:"src/main.c",status:"built"},{path:"src/utils.c",status:"built"},{path:"src/steelconf.mff",status:"skipped"}]}async ngAfterViewInit(){await this.loadMonaco(),!(!this.monaco||!this.cEditorHost||!this.steelEditorHost)&&(this.registerSteelconfLanguage(),this.registerCompletions(),this.cFiles.forEach(e=>{e.model=this.monaco.editor.createModel(e.initial,"c",this.monaco.Uri.parse(`file:///${e.path}`))}),this.cEditor=this.monaco.editor.create(this.cEditorHost.nativeElement,{model:this.cFiles[this.activeCFile].model,language:"c",theme:"steel-light",minimap:{enabled:!1},fontFamily:'"IBM Plex Mono", monospace',fontSize:14,lineHeight:20,automaticLayout:!0}),this.steelEditor=this.monaco.editor.create(this.steelEditorHost.nativeElement,{value:this.steelConfCode,language:"steelconf",theme:"steel-light",minimap:{enabled:!1},fontFamily:'"IBM Plex Mono", monospace',fontSize:14,lineHeight:20,automaticLayout:!0}),this.cEditor.onDidChangeModelContent(()=>{let e=this.cEditor.getModel(),i=this.cFiles.find(t=>t.model===e);i&&(i.initial=e.getValue())}),this.steelEditor.onDidChangeModelContent(()=>{this.steelConfCode=this.steelEditor.getValue()}))}ngOnDestroy(){this.cFiles.forEach(e=>{e.model&&e.model.dispose()}),this.cEditor&&this.cEditor.dispose(),this.steelEditor&&this.steelEditor.dispose()}runBuild(){this.buildToggle=!this.buildToggle,this.issueFilter="all";let e=this.getBuildDiagnostics();if(this.buildToggle){let i=e.issues.filter(t=>t.level==="error").length;this.buildLogs=[{level:"info",text:"steel build: parsing steelconf..."},{level:"debug",text:"cc -O2 -g src/main.c src/utils.c -o target/out/app_c"},...e.logs,{level:"info",text:`build failed with ${i} error(s)`}],this.buildIssues=e.issues,this.buildArtifacts=[{path:"target/out/app_c",status:"skipped"},{path:"target/out/app_c.dSYM",status:"skipped"}],this.buildResult="Build failed. Fix errors and try again.",this.applyMarkers(e.issues)}else this.buildLogs=[{level:"info",text:"steel build: parsing steelconf..."},{level:"debug",text:"cc -O2 -g src/main.c src/utils.c -o target/out/app_c"},{level:"info",text:"linking target/out/app_c"},{level:"success",text:"build succeeded in 0.9s"}],this.buildIssues=[],this.buildArtifacts=[{path:"target/out/app_c",status:"built"},{path:"target/out/app_c.dSYM",status:"built"}],this.buildResult="Result: Steel says hello!",this.applyMarkers([])}setActiveCFile(e){!this.cEditor||!this.cFiles[e]||(this.activeCFile=e,this.cEditor.setModel(this.cFiles[e].model))}jumpToIssue(e){if(!this.monaco)return;if(e.file.endsWith("steelconf.mff")){this.steelEditor&&(this.steelEditor.revealPositionInCenter({lineNumber:e.line,column:e.column}),this.steelEditor.setPosition({lineNumber:e.line,column:e.column}),this.steelEditor.focus());return}let i=this.cFiles.findIndex(t=>t.path===e.file);i!==-1&&(this.setActiveCFile(i),this.cEditor&&(this.cEditor.revealPositionInCenter({lineNumber:e.line,column:e.column}),this.cEditor.setPosition({lineNumber:e.line,column:e.column}),this.cEditor.focus()))}get filteredIssues(){return this.issueFilter==="all"?this.buildIssues:this.buildIssues.filter(e=>e.level===this.issueFilter)}get errorCount(){return this.countIssues("error")}get warnCount(){return this.countIssues("warn")}setIssueFilter(e){this.issueFilter=e}async loadMonaco(){if(window.__monacoLoaded){this.monaco=window.monaco;return}await new Promise(e=>{let i=document.querySelector("script[data-monaco-loader]");if(i){i.addEventListener("load",()=>e()),e();return}let t=document.createElement("script");t.setAttribute("data-monaco-loader","true"),t.src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.52.0/min/vs/loader.min.js",t.onload=()=>e(),document.body.appendChild(t)}),await new Promise(e=>{if(!window.require){e();return}window.require.config({paths:{vs:"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.52.0/min/vs"}}),window.require(["vs/editor/editor.main"],()=>{window.__monacoLoaded=!0,this.monaco=window.monaco,this.defineTheme(),e()})})}defineTheme(){this.monaco&&this.monaco.editor.defineTheme("steel-light",{base:"vs",inherit:!0,rules:[{token:"comment",foreground:"7a6d7f"},{token:"keyword",foreground:"b1202d",fontStyle:"bold"},{token:"string",foreground:"1f7a44"},{token:"number",foreground:"1f6fb2"},{token:"type",foreground:"7a2bd9"},{token:"preproc",foreground:"b36b00",fontStyle:"bold"}],colors:{"editor.background":"#fbf7f3","editorLineNumber.foreground":"#a89aa8","editorLineNumber.activeForeground":"#3a0a18"}})}registerSteelconfLanguage(){this.monaco&&(this.monaco.languages.register({id:"steelconf"}),this.monaco.languages.setMonarchTokensProvider("steelconf",{tokenizer:{root:[[/\[[^\]]+\]/,"keyword"],[/"(?:[^"\\]|\\.)*"/,"string"],[/\b\d+\b/,"number"],[/\b(tool|bake|run|make|set|emits|takes|output|exec|workspace|profile|target_dir|root|cglob)\b/,"keyword"],[/\.{2}/,"delimiter"],[/#.*$/,"comment"]]}}))}registerCompletions(){this.monaco&&(this.monaco.languages.registerCompletionItemProvider("c",{provideCompletionItems:()=>({suggestions:[{label:"for",kind:this.monaco.languages.CompletionItemKind.Snippet,insertText:`for (int i = 0; i < \${1:count}; i++) {
	$0
}`,insertTextRules:this.monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"if",kind:this.monaco.languages.CompletionItemKind.Snippet,insertText:`if (\${1:condition}) {
	$0
}`,insertTextRules:this.monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"printf",kind:this.monaco.languages.CompletionItemKind.Function,insertText:'printf("${1:message}\\n"${2:});'}]})}),this.monaco.languages.registerCompletionItemProvider("steelconf",{provideCompletionItems:()=>({suggestions:[{label:"tool",kind:this.monaco.languages.CompletionItemKind.Snippet,insertText:`[tool cc]
	.exec "cc"
..`,insertTextRules:this.monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"bake",kind:this.monaco.languages.CompletionItemKind.Snippet,insertText:`[bake build]
	.make src cglob "src/**/*.c"
	[run cc]
		.takes src as "@args"
		.emits exe as "-o"
	..
	.output exe "target/out/app"
..`,insertTextRules:this.monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"workspace",kind:this.monaco.languages.CompletionItemKind.Snippet,insertText:`[workspace]
	.set name "demo"
	.set root "."
	.set target_dir "target"
	.set profile "debug"
..`,insertTextRules:this.monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet}]})}))}getBuildDiagnostics(){let e=[],i=[],t=this.getCFileValue("src/main.c"),a=this.getCFileValue("src/utils.c"),d=this.steelConfCode,I=this.findLine(t,/printf\(/);return I&&!/printf\([^)]*\);/.test(this.getLine(t,I))&&e.push({level:"error",file:"src/main.c",line:I,column:3,message:'expected ";" after printf call'}),/return\s+0\s*;/.test(t)||e.push({level:"error",file:"src/main.c",line:3,column:3,message:"missing return 0; in main"}),/buffer/.test(a)&&!/\buse\b/.test(a)&&e.push({level:"warn",file:"src/utils.c",line:this.findLine(a,/buffer/)||1,column:5,message:"unused variable `buffer`"}),/\[tool\s+cc\]/.test(d)||e.push({level:"error",file:"src/steelconf.mff",line:1,column:1,message:"missing [tool cc] block"}),/\[bake\s+.+\]/.test(d)||e.push({level:"warn",file:"src/steelconf.mff",line:1,column:1,message:"no [bake] block found"}),e.forEach(h=>{i.push({level:h.level==="error"?"error":"warn",text:`${h.level}: ${h.message} in ${h.file}:${h.line}:${h.column}`})}),{issues:e,logs:i}}applyMarkers(e){if(!this.monaco)return;this.cFiles.forEach(t=>{let a=e.filter(d=>d.file===t.path).map(d=>({severity:d.level==="error"?this.monaco.MarkerSeverity.Error:this.monaco.MarkerSeverity.Warning,message:d.message,startLineNumber:d.line,startColumn:d.column,endLineNumber:d.line,endColumn:d.column+1}));this.monaco.editor.setModelMarkers(t.model,"steel-build",a)});let i=e.filter(t=>t.file.endsWith("steelconf.mff")).map(t=>({severity:t.level==="error"?this.monaco.MarkerSeverity.Error:this.monaco.MarkerSeverity.Warning,message:t.message,startLineNumber:t.line,startColumn:t.column,endLineNumber:t.line,endColumn:t.column+1}));this.steelEditor&&this.monaco.editor.setModelMarkers(this.steelEditor.getModel(),"steel-build",i)}getCFileValue(e){let i=this.cFiles.find(t=>t.path===e);return!i||!i.model?"":i.model.getValue()}findLine(e,i){let t=e.split(`
`);for(let a=0;a<t.length;a+=1)if(i.test(t[a]))return a+1;return null}getLine(e,i){return e.split(`
`)[i-1]||""}countIssues(e){return this.buildIssues.filter(i=>i.level===e).length}static \u0275fac=function(i){return new(i||r)(S(R),S(A))};static \u0275cmp=F({type:r,selectors:[["app-docs"]],viewQuery:function(i,t){if(i&1&&T(P,5)(H,5),i&2){let a;y(a=k())&&(t.cEditorHost=a.first),y(a=k())&&(t.steelEditorHost=a.first)}},decls:118,vars:37,consts:[["cEditorHost",""],["steelEditorHost",""],["noIssues",""],[1,"section"],[1,"section-head"],[1,"eyebrow"],[1,"section-lead"],[1,"card-grid","three"],["class","panel",4,"ngFor","ngForOf"],[1,"panel","terminal","wide"],[1,"editor-grid"],[1,"panel","editor-pane"],[1,"editor-header"],[1,"pill"],[1,"editor-tabs"],["class","tab-btn","type","button",3,"active","click",4,"ngFor","ngForOf"],[1,"editor-body"],[1,"editor-host"],[1,"panel","build-panel"],["type","button",1,"btn","primary",3,"click"],[1,"build-layout"],[1,"build-main"],[1,"build-meta"],[1,"build-files"],["class","file-line",4,"ngFor","ngForOf"],[1,"build-logs"],["class","log-line",3,"class",4,"ngFor","ngForOf"],["class","hint",4,"ngIf"],["class","build-result",4,"ngIf"],[1,"build-sidebar"],[1,"sidebar-head"],[1,"filter-row"],["type","button",1,"filter-btn",3,"click"],["class","build-issues",4,"ngIf","ngIfElse"],["class","panel terminal",4,"ngFor","ngForOf"],[1,"card-grid","two"],[1,"panel"],["type","button",1,"tab-btn",3,"click"],[1,"file-line"],[1,"file-status"],[1,"log-line"],[1,"log-level"],[1,"hint"],[1,"build-result"],[1,"build-issues"],["class","issue-line","type","button",3,"click",4,"ngFor","ngForOf"],["type","button",1,"issue-line",3,"click"],[1,"issue-level"],[1,"panel","terminal"]],template:function(i,t){if(i&1){let a=x();o(0,"section",3)(1,"div",4)(2,"p",5),s(3),n(),o(4,"h2"),s(5),n(),o(6,"p",6),s(7),n()(),o(8,"div",7),u(9,N,5,2,"article",8),n(),o(10,"article",9)(11,"h3"),s(12),n(),o(13,"pre")(14,"code"),s(15,`!muf 4

[workspace]
	.set name "demo"
	.set root "."
	.set target_dir "target"
	.set profile "debug"
..

[tool cc]
	.exec "cc"
..

[bake build]
	.make c_src cglob "src/**/*.c"
	[run cc]
		.takes c_src as "@args"
		.set "-O2" 1
		.set "-g" 1
		.emits exe as "-o"
	..
	.output exe "target/out/app"
..`),n()()()(),o(16,"section",3)(17,"div",4)(18,"p",5),s(19,"Playground"),n(),o(20,"h2"),s(21,"Build with live C + steelconf"),n(),o(22,"p",6),s(23,"Edit C and steelconf with a VSCode-like editor, then simulate a build."),n()(),o(24,"div",10)(25,"article",11)(26,"div",12)(27,"h3"),s(28,"C source"),n(),o(29,"span",13),s(30,"src"),n()(),o(31,"div",14),u(32,j,2,3,"button",15),n(),o(33,"div",16),C(34,"div",17,0),n()(),o(36,"article",11)(37,"div",12)(38,"h3"),s(39,"steelconf"),n(),o(40,"span",13),s(41,"steelconf.mff"),n()(),o(42,"div",16),C(43,"div",17,1),n()()(),o(45,"article",18)(46,"div",12)(47,"h3"),s(48,"Build output"),n(),o(49,"button",19),g("click",function(){return p(a),f(t.runBuild())}),s(50,"Simulate build"),n()(),o(51,"div",20)(52,"div",21)(53,"div",22)(54,"div",23)(55,"h4"),s(56,"Files"),n(),u(57,q,5,4,"div",24),n()(),o(58,"div",25),u(59,W,5,4,"div",26)(60,K,2,0,"p",27),n(),u(61,Q,2,1,"p",28),n(),o(62,"aside",29)(63,"div",30)(64,"h4"),s(65,"Diagnostics"),n(),o(66,"div",31)(67,"button",32),g("click",function(){return p(a),f(t.setIssueFilter("all"))}),s(68),n(),o(69,"button",32),g("click",function(){return p(a),f(t.setIssueFilter("error"))}),s(70),n(),o(71,"button",32),g("click",function(){return p(a),f(t.setIssueFilter("warn"))}),s(72),n()()(),u(73,J,2,1,"div",33)(74,Y,2,0,"ng-template",null,2,M),n()()()(),o(76,"section",3)(77,"div",4)(78,"p",5),s(79),n(),o(80,"h2"),s(81),n(),o(82,"p",6),s(83),n()(),o(84,"div",7),u(85,U,6,2,"article",34),n()(),o(86,"section",3)(87,"div",4)(88,"p",5),s(89),n(),o(90,"h2"),s(91),n()(),o(92,"div",7),u(93,G,5,2,"article",8),n()(),o(94,"section",3)(95,"div",4)(96,"p",5),s(97),n(),o(98,"h2"),s(99),n()(),o(100,"div",35),u(101,X,3,1,"article",8),n()(),o(102,"section",3)(103,"div",4)(104,"p",5),s(105),n(),o(106,"h2"),s(107),n()(),o(108,"div",35),u(109,Z,3,1,"article",8),n()(),o(110,"section",3)(111,"div",4)(112,"p",5),s(113),n(),o(114,"h2"),s(115),n()(),o(116,"div",35),u(117,ee,4,1,"article",34),n()()}if(i&2){let a=L(75);l(3),c(t.t.docs.eyebrow),l(2),c(t.t.docs.title),l(2),c(t.t.docs.lead),l(2),m("ngForOf",t.t.docs.sections),l(3),c(t.t.examples.minimalTitle),l(20),m("ngForOf",t.cFiles),l(25),m("ngForOf",t.buildArtifacts),l(2),m("ngForOf",t.buildLogs),l(),m("ngIf",!t.buildLogs.length),l(),m("ngIf",t.buildResult),l(6),_("active",t.issueFilter==="all"),l(),b(" All (",t.buildIssues.length,") "),l(),_("active",t.issueFilter==="error"),l(),b(" Errors (",t.errorCount,") "),l(),_("active",t.issueFilter==="warn"),l(),b(" Warnings (",t.warnCount,") "),l(),m("ngIf",t.filteredIssues.length)("ngIfElse",a),l(6),c(t.t.examples.eyebrow),l(2),c(t.t.examples.title),l(2),c(t.t.examples.lead),l(2),m("ngForOf",t.examples),l(4),c(t.t.docs.guidesTitle),l(2),c(t.t.docs.guidesTitle),l(2),m("ngForOf",t.t.docs.guides),l(4),c(t.t.docs.troubleshootingTitle),l(2),c(t.t.docs.troubleshootingTitle),l(2),m("ngForOf",t.t.docs.troubleshooting),l(4),c(t.t.docs.bestPracticesTitle),l(2),c(t.t.docs.bestPracticesTitle),l(2),m("ngForOf",t.t.docs.bestPractices),l(4),c(t.t.docs.commandsTitle),l(2),c(t.t.docs.commandsTitle),l(2),m("ngForOf",t.t.docs.commandList)}},dependencies:[$,O,V],encapsulation:2})};export{B as DocsComponent};
