<section class="section" *ngIf="post">
  <div class="section-head">
    <p class="eyebrow">{{ t.blog.eyebrow }}</p>
    <h2>{{ post.title }}</h2>
    <p class="section-lead">{{ post.date }}</p>
  </div>
  <article class="panel">
    <p *ngFor="let paragraph of post.body">{{ paragraph }}</p>
  </article>
  <article class="panel">
    <h3>Key takeaways</h3>
    <ul class="list">
      <li *ngFor="let item of post.takeaways">{{ item }}</li>
    </ul>
  </article>
</section>

<section class="section" *ngIf="post">
  <div class="section-head">
    <p class="eyebrow">Login</p>
    <h2>Author access</h2>
    <p class="section-lead">Sign in to post comments and send messages.</p>
  </div>
  <article class="panel">
    <form class="form" (submit)="signIn(); $event.preventDefault();">
      <label>
        <span>Email</span>
        <input type="email" [(ngModel)]="authEmail" name="authEmail" />
      </label>
      <label>
        <span>Password</span>
        <input type="password" [(ngModel)]="authPassword" name="authPassword" />
      </label>
      <div class="form-actions">
        <button class="btn primary" type="submit">Sign in</button>
        <button class="btn ghost" type="button" (click)="signOut()">Sign out</button>
      </div>
      <p class="hint">Or continue with</p>
      <div class="form-actions">
        <button class="btn ghost" type="button" (click)="signInWithProvider('github')">GitHub</button>
        <button class="btn ghost" type="button" (click)="signInWithProvider('google')">Google</button>
        <button class="btn ghost" type="button" (click)="signInWithProvider('azure')">Microsoft</button>
      </div>
      <p class="hint" *ngIf="authStatus">{{ authStatus }}</p>
    </form>
  </article>
</section>

<section class="section" *ngIf="post">
  <div class="section-head">
    <p class="eyebrow">Comments</p>
    <h2>Reader notes</h2>
    <p class="section-lead">Public comments appear once approved.</p>
  </div>

  <div class="card-grid two">
    <article class="panel" *ngFor="let comment of comments">
      <p class="hint">{{ comment.created_at | date: 'mediumDate' }} Â· {{ comment.rating || '-' }}/5</p>
      <h3>{{ comment.author }}</h3>
      <p>{{ comment.message }}</p>
    </article>
  </div>

  <article class="panel">
    <h3>Add a comment</h3>
    <p class="hint">Login required to submit.</p>
    <form class="form" (submit)="submitComment(); $event.preventDefault();">
      <label>
        <span>Name</span>
        <input type="text" [(ngModel)]="form.author" name="author" />
      </label>
      <label class="honeypot">
        <span>Website</span>
        <input type="text" [(ngModel)]="form.website" name="website" autocomplete="off" />
      </label>
      <label>
        <span>Rating (1-5)</span>
        <input type="number" min="1" max="5" [(ngModel)]="form.rating" name="rating" />
      </label>
      <label>
        <span>Message</span>
        <textarea rows="4" [(ngModel)]="form.message" name="message"></textarea>
      </label>
      <button class="btn primary" type="submit">Submit</button>
      <p class="hint" *ngIf="status">{{ status }}</p>
    </form>
  </article>
</section>
