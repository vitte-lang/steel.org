<section class="section">
  <div class="section-head">
    <p class="eyebrow">{{ t.docs.eyebrow }}</p>
    <h2>{{ t.docs.title }}</h2>
    <p class="section-lead">{{ t.docs.lead }}</p>
  </div>
  <div class="card-grid three">
    <article class="panel" *ngFor="let section of t.docs.sections">
      <h3>{{ section.title }}</h3>
      <p>{{ section.text }}</p>
    </article>
  </div>

  <article class="panel terminal wide">
    <h3>{{ t.examples.minimalTitle }}</h3>
    <pre><code>!muf 4

[workspace]
	.set name "demo"
	.set root "."
	.set target_dir "target"
	.set profile "debug"
..

[tool cc]
	.exec "cc"
..

[bake build]
	.make c_src cglob "src/**/*.c"
	[run cc]
		.takes c_src as "@args"
		.set "-O2" 1
		.set "-g" 1
		.emits exe as "-o"
	..
	.output exe "target/out/app"
..</code></pre>
  </article>
</section>

<section class="section">
  <div class="section-head">
    <p class="eyebrow">Playground</p>
    <h2>Build with live C + steelconf</h2>
    <p class="section-lead">Edit C and steelconf with a VSCode-like editor, then simulate a build.</p>
  </div>
  <div class="editor-grid">
    <article class="panel editor-pane">
      <div class="editor-header">
        <h3>C source</h3>
        <span class="pill">src</span>
      </div>
      <div class="editor-tabs">
        <button
          class="tab-btn"
          type="button"
          *ngFor="let file of cFiles; let i = index"
          [class.active]="i === activeCFile"
          (click)="setActiveCFile(i)"
        >
          {{ file.name }}
        </button>
      </div>
      <div class="editor-body">
        <div class="editor-host" #cEditorHost></div>
      </div>
    </article>
    <article class="panel editor-pane">
      <div class="editor-header">
        <h3>steelconf</h3>
        <span class="pill">steelconf.mff</span>
      </div>
      <div class="editor-body">
        <div class="editor-host" #steelEditorHost></div>
      </div>
    </article>
  </div>
  <article class="panel build-panel">
    <div class="editor-header">
      <h3>Build output</h3>
      <button class="btn primary" type="button" (click)="runBuild()">Simulate build</button>
    </div>
    <div class="build-layout">
      <div class="build-main">
        <div class="build-meta">
          <div class="build-files">
            <h4>Files</h4>
            <div class="file-line" *ngFor="let file of buildArtifacts">
              <span class="file-status" [class]="file.status">{{ file.status }}</span>
              <span>{{ file.path }}</span>
            </div>
          </div>
        </div>
        <div class="build-logs">
          <div class="log-line" *ngFor="let log of buildLogs" [class]="log.level">
            <span class="log-level">{{ log.level }}</span>
            <span>{{ log.text }}</span>
          </div>
          <p class="hint" *ngIf="!buildLogs.length">Run a build to see logs, errors, and result output.</p>
        </div>
        <p class="build-result" *ngIf="buildResult">{{ buildResult }}</p>
      </div>
      <aside class="build-sidebar">
        <div class="sidebar-head">
          <h4>Diagnostics</h4>
          <div class="filter-row">
            <button
              class="filter-btn"
              type="button"
              [class.active]="issueFilter === 'all'"
              (click)="setIssueFilter('all')"
            >
              All ({{ buildIssues.length }})
            </button>
            <button
              class="filter-btn"
              type="button"
              [class.active]="issueFilter === 'error'"
              (click)="setIssueFilter('error')"
            >
              Errors ({{ errorCount }})
            </button>
            <button
              class="filter-btn"
              type="button"
              [class.active]="issueFilter === 'warn'"
              (click)="setIssueFilter('warn')"
            >
              Warnings ({{ warnCount }})
            </button>
          </div>
        </div>
        <div class="build-issues" *ngIf="filteredIssues.length; else noIssues">
          <button
            class="issue-line"
            type="button"
            *ngFor="let issue of filteredIssues"
            (click)="jumpToIssue(issue)"
          >
            <span class="issue-level" [class]="issue.level">{{ issue.level }}</span>
            <span>{{ issue.file }}:{{ issue.line }}:{{ issue.column }} â€” {{ issue.message }}</span>
          </button>
        </div>
        <ng-template #noIssues>
          <p class="hint">No diagnostics yet.</p>
        </ng-template>
      </aside>
    </div>
  </article>
</section>

<section class="section">
  <div class="section-head">
    <p class="eyebrow">{{ t.examples.eyebrow }}</p>
    <h2>{{ t.examples.title }}</h2>
    <p class="section-lead">{{ t.examples.lead }}</p>
  </div>
  <div class="card-grid three">
    <article class="panel terminal" *ngFor="let example of examples">
      <h3>{{ example.title }}</h3>
      <pre><code>{{ example.code }}</code></pre>
    </article>
  </div>
</section>

<section class="section">
  <div class="section-head">
    <p class="eyebrow">{{ t.docs.guidesTitle }}</p>
    <h2>{{ t.docs.guidesTitle }}</h2>
  </div>
  <div class="card-grid three">
    <article class="panel" *ngFor="let guide of t.docs.guides">
      <h3>{{ guide.title }}</h3>
      <p>{{ guide.text }}</p>
    </article>
  </div>
</section>

<section class="section">
  <div class="section-head">
    <p class="eyebrow">{{ t.docs.troubleshootingTitle }}</p>
    <h2>{{ t.docs.troubleshootingTitle }}</h2>
  </div>
  <div class="card-grid two">
    <article class="panel" *ngFor="let tip of t.docs.troubleshooting">
      <p>{{ tip }}</p>
    </article>
  </div>
</section>

<section class="section">
  <div class="section-head">
    <p class="eyebrow">{{ t.docs.bestPracticesTitle }}</p>
    <h2>{{ t.docs.bestPracticesTitle }}</h2>
  </div>
  <div class="card-grid two">
    <article class="panel" *ngFor="let item of t.docs.bestPractices">
      <p>{{ item }}</p>
    </article>
  </div>
</section>

<section class="section">
  <div class="section-head">
    <p class="eyebrow">{{ t.docs.commandsTitle }}</p>
    <h2>{{ t.docs.commandsTitle }}</h2>
  </div>
  <div class="card-grid two">
    <article class="panel terminal" *ngFor="let cmd of t.docs.commandList">
      <pre><code>steel@mymachine$ {{ cmd }}</code></pre>
    </article>
  </div>
</section>
