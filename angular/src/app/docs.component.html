<section class="section">
  <div class="section-head">
    <p class="eyebrow">{{ t.docs.eyebrow }}</p>
    <h2>{{ t.docs.title }}</h2>
    <p class="section-lead">{{ t.docs.lead }}</p>
  </div>
  <div class="card-grid three">
    <article class="panel" *ngFor="let section of t.docs.sections">
      <h3>{{ section.title }}</h3>
      <p>{{ section.text }}</p>
    </article>
  </div>

  <article class="panel terminal wide">
    <h3>{{ t.examples.minimalTitle }}</h3>
    <pre><code>!muf 4

[workspace]
	.set name "demo"
	.set root "."
	.set target_dir "target"
	.set profile "debug"
..

[tool cc]
	.exec "cc"
..

[bake build]
	.make c_src cglob "src/**/*.c"
	[run cc]
		.takes c_src as "@args"
		.set "-O2" 1
		.set "-g" 1
		.emits exe as "-o"
	..
	.output exe "target/out/app"
..</code></pre>
  </article>
</section>

<section class="section">
  <div class="section-head">
    <p class="eyebrow">Playground</p>
    <h2>Build with live C + steelconf</h2>
    <p class="section-lead">Edit C and steelconf with a VSCode-like editor, then simulate a build.</p>
  </div>
  <div class="card-grid two">
    <article class="panel">
      <h3>C source editor</h3>
      <div
        class="code-editor"
        #cEditor
        role="textbox"
        aria-label="C source"
      ></div>
      <div class="inline-actions">
        <button type="button" class="button ghost" (click)="resetEditor('c')">Reset example</button>
      </div>
    </article>
    <article class="panel">
      <h3>steelconf editor</h3>
      <div
        class="code-editor"
        #steelEditor
        role="textbox"
        aria-label="steelconf"
      ></div>
      <div class="inline-actions">
        <button type="button" class="button ghost" (click)="resetEditor('steel')">Reset example</button>
      </div>
    </article>
  </div>
  <article class="panel">
    <h3>Diagnostics</h3>
    <div class="inline-actions">
      <button type="button" class="button" (click)="runBuild()">Run build</button>
      <span class="hint">Diagnostics run only on build.</span>
      <span class="hint" *ngIf="buildStatus">{{ buildStatus }}</span>
    </div>
    <p *ngIf="diagnostics.length === 0">Run a build to see diagnostics.</p>
    <div *ngFor="let d of diagnostics; let i = index">
      <p>
        <strong>{{ i + 1 }}.</strong>
        <strong>{{ d.level }}</strong>
        <span *ngIf="d.line">L{{ d.line }}</span>
        — {{ d.message }}
      </p>
    </div>
  </article>
</section>

<section class="section">
  <div class="section-head">
    <p class="eyebrow">{{ t.examples.eyebrow }}</p>
    <h2>{{ t.examples.title }}</h2>
    <p class="section-lead">{{ t.examples.lead }}</p>
  </div>
  <div class="card-grid three">
    <article class="panel terminal" *ngFor="let example of examples">
      <h3>{{ example.title }}</h3>
      <pre><code>{{ example.code }}</code></pre>
    </article>
  </div>
</section>

<section class="section">
  <div class="section-head">
    <p class="eyebrow">{{ t.docs.guidesTitle }}</p>
    <h2>{{ t.docs.guidesTitle }}</h2>
  </div>
  <div class="card-grid three">
    <article class="panel" *ngFor="let guide of t.docs.guides">
      <h3>{{ guide.title }}</h3>
      <p>{{ guide.text }}</p>
    </article>
  </div>
</section>

<section class="section">
  <div class="section-head">
    <p class="eyebrow">{{ t.docs.troubleshootingTitle }}</p>
    <h2>{{ t.docs.troubleshootingTitle }}</h2>
  </div>
  <div class="card-grid two">
    <article class="panel" *ngFor="let tip of t.docs.troubleshooting">
      <p>{{ tip }}</p>
    </article>
  </div>
</section>

<section class="section">
  <div class="section-head">
    <p class="eyebrow">{{ t.docs.bestPracticesTitle }}</p>
    <h2>{{ t.docs.bestPracticesTitle }}</h2>
  </div>
  <div class="card-grid two">
    <article class="panel" *ngFor="let item of t.docs.bestPractices">
      <p>{{ item }}</p>
    </article>
  </div>
</section>

<section class="section">
  <div class="section-head">
    <p class="eyebrow">{{ t.docs.commandsTitle }}</p>
    <h2>{{ t.docs.commandsTitle }}</h2>
  </div>
  <div class="card-grid two">
    <article class="panel terminal" *ngFor="let cmd of t.docs.commandList">
      <pre><code>steel@mymachine$ {{ cmd }}</code></pre>
    </article>
  </div>
</section>

<section class="section">
  <div class="section-head">
    <p class="eyebrow">Keywords</p>
    <h2>Keywords MUF 4</h2>
    <p class="section-lead">Explications simples, logiques, utiles.</p>
  </div>
  <div class="card-grid three">
    <article class="panel">
      <h3>Blocs</h3>
      <p><code>workspace</code> — bloc racine. Forme: <code>[workspace]</code> + <code>.set &lt;key&gt; &lt;value&gt;</code>. Ex: <code>.set target_dir "target"</code>.</p>
      <p><code>profile</code> — profil nomme. Forme: <code>[profile &lt;name&gt;]</code> + <code>.set opt 2</code>. Ex: <code>[profile release]</code>.</p>
      <p><code>tool</code> — definition d'un binaire. Forme: <code>[tool &lt;name&gt;]</code> + <code>.exec "cmd"</code>. Ex: <code>[tool cc]</code>.</p>
      <p><code>bake</code> — recette. Forme: <code>[bake &lt;name&gt;]</code> + <code>.make</code> + <code>[run]</code> + <code>.output</code>. Ex: <code>[bake build]</code>.</p>
      <p><code>export</code> — publication. Forme: <code>[export]</code> + <code>.ref &lt;bake&gt;</code>. Ex: <code>.ref build</code>.</p>
    </article>
    <article class="panel">
      <h3>Run</h3>
      <p><code>run &lt;tool&gt;</code> — bloc d'exec dans un bake. Ex: <code>[run cc]</code>.</p>
      <p><code>.takes &lt;id&gt; as &lt;flag&gt;</code> — input -&gt; flag. Ex: <code>.takes c_src as "@args"</code>.</p>
      <p><code>.emits &lt;port&gt; as &lt;flag&gt;</code> — output -&gt; flag. Ex: <code>.emits exe as "-o"</code>.</p>
      <p><code>.set &lt;flag&gt; &lt;value&gt;</code> — flag/valeur brut. Ex: <code>.set "-O2" 1</code>.</p>
    </article>
    <article class="panel">
      <h3>Sources + sortie</h3>
      <p><code>.make &lt;id&gt; &lt;kind&gt; &lt;pattern&gt;</code> — input. Ex: <code>.make c_src cglob "src/**/*.c"</code>.</p>
      <p><code>.output &lt;port&gt; &lt;path&gt;</code> — sortie finale. Ex: <code>.output exe "target/out/app"</code>.</p>
      <p><code>.needs &lt;bake&gt;</code> — dependance. Ex: <code>.needs build</code>.</p>
      <p><code>.ref &lt;bake&gt;</code> — expose. Ex: <code>.ref build</code>.</p>
    </article>
  </div>
</section>
